<ion-content>
  <div *ngIf="isLoading" class="loading-spinner">
    <!-- Spinner de carga para la pÃ¡gina completa -->
    <ion-spinner></ion-spinner>
  </div>

  <div *ngIf="!isLoading">
    <ion-list>
      <div *ngFor="let post of posts; let i = index" class="post-item" style="margin-top: 5%;">
        <div *ngIf="isLoadingPosts[i]" class="loading-spinner">
          <!-- Spinner de carga para cada tarjeta individual -->
          <ion-spinner></ion-spinner>
        </div>

        <div *ngIf="!isLoadingPosts[i]">
          <!-- Contenido de la tarjeta -->
          <div style="display: flex; flex-direction: row; align-items: center; gap: 20px; margin-left: 10px; position: absolute;">
            <img style="width: 5%; height: 5%; " src="../../assets/userPic/profileIcon.png" alt="profile">
            <p style="color: white;">{{ post.userDetails?.[0]?.name }}</p>
          </div>
          <div style="margin-bottom: 10px;">
            <ion-img *ngIf="isImage(post.file); else videoContent" [src]="post.file" alt="Imagen"></ion-img>
            <ng-template #videoContent>
              <video [src]="post.file" loop controls></video>
            </ng-template>
          </div>
          <div style="display: flex; flex-direction: row; gap: 15px;">
            <ion-button color="dark" style="margin-top: -4px;" fill="clear" (click)="addLike(post._id)">
              <ion-icon slot="icon-only" size="large" [name]="post.hasLikes ? 'heart' : 'heart-outline'"></ion-icon>
            </ion-button>
            <ion-button color="dark" style="margin-top: -4px;" fill="clear" expand="block" (click)="setOpen(post, true)">
              <ion-icon slot="icon-only" size="large" name="chatbubble-outline"></ion-icon>
            </ion-button>
            <ion-icon size="large" name="share-outline"></ion-icon>
          </div>
          <ion-label class="label">
            <div style="display: flex; flex-direction: row; gap: 5px; margin-top: 10px;">
              <p>{{ post.userDetails?.[0]?.name }}</p>
              <p>{{ post.description }}</p>
            </div>
          </ion-label>
          <ion-list lines="full" class="likeMenu">
            <ion-modal [isOpen]="post.isModalOpen">
              <ng-template>
                <!-- Contenido del modal -->
              </ng-template>
            </ion-modal>
          </ion-list>
        </div>
      </div>
    </ion-list>
  </div>
</ion-content>
<app-navbar/>