<ion-content>
  <ion-refresher slot="fixed" (ionRefresh)="handleRefresh($event)">
    <ion-refresher-content></ion-refresher-content>
  </ion-refresher>
  <ion-list  style="margin-bottom: 90px;">
    <div *ngFor="let post of posts " class="post-item" style="margin-top: 5%;">
      <div style="display: flex; flex-direction: raw; align-items: center; gap: 20px; margin-left: 10px; position: absolute;">
        <img style="width: 5%; height: 5%; " src="../../assets/userPic/profileIcon.png" alt="profile">
        <p style="color: white;">{{ post.userDetails?.[0]?.name }}</p>
      </div>
      <div style="margin-bottom: 10px;">
        <ion-img *ngIf="isImage(post.file); else videoContent" [src]="post.file" alt="Imagen"></ion-img>
        <ng-template #videoContent>
          <video  [src]="post.file" loop controls>
          </video> 
        </ng-template>
      </div>
      <ion-label class="label">
        <h2>{{ post.title }}</h2>
        <p>{{ post.description }}</p>    
        <p>{{ post.allComments?.[0]?.comments }}</p>   
      </ion-label>
      <ion-list lines="full" class="likeMenu">
        <ion-icon size="large" name="heart-outline"></ion-icon>
            <ion-button color="dark" style="margin-top: -4px;" fill ="clear" expand="block" (click)="setOpen(post, true)">
                <ion-icon  slot="icon-only" size="large" name="chatbubble-outline"></ion-icon>
            </ion-button>   
            <ion-modal [isOpen]="post.isModalOpen">
                <ng-template>
                  <ion-header>
                    <ion-toolbar>
                      <ion-title>Comentarios</ion-title>
                      <ion-buttons slot="end">
                        <ion-button (click)="setOpen(post, false)">Close</ion-button>
                      </ion-buttons>
                    </ion-toolbar>
                  </ion-header>
                  <ion-content class="ion-padding">
                    <ion-list>
                        <ng-container *ngFor="let comment of post.allComments">
                            <!-- Mostrar el contenido de cada comentario -->
                            <ion-item>
                              <!-- Puedes mostrar cualquier propiedad del comentario aquÃ­ -->
                              <ion-label>{{ comment.comments }}</ion-label>
                            </ion-item>
                          </ng-container>
                    </ion-list>
                  </ion-content>
                </ng-template>
            </ion-modal>
        <ion-icon size="large" name="share-outline"></ion-icon>
      </ion-list>
    </div>
    
  </ion-list>
  <!-- <ion-infinite-scroll (ionInfinite)="onIonInfinite($event)">
    <ion-infinite-scroll-content></ion-infinite-scroll-content>
  </ion-infinite-scroll> -->

</ion-content>
<app-navbar></app-navbar>
